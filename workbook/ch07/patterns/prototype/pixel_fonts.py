from abc import ABC, abstractmethod
from copy import deepcopy

class Prototype(ABC):
    @abstractmethod
    def clone(self):
        pass

class ColorUtils:
    @staticmethod
    def rgb_to_gray(r: int, g: int, b: int) -> int:
        return int(0.299 * r + 0.587 * g + 0.114 * b)
    
    @staticmethod
    def blend_colors_alpha(color1: tuple, color2: tuple, ratio: float) -> tuple:
        r1, g1, b1, a1 = color1 if len(color1) == 4 else (*color1, 255)
        r2, g2, b2, a2 = color2 if len(color2) == 4 else (*color2, 255)
        
        r = int(r1 * (1 - ratio) + r2 * ratio)
        g = int(g1 * (1 - ratio) + g2 * ratio)
        b = int(b1 * (1 - ratio) + b2 * ratio)
        a = int(a1 * (1 - ratio) + a2 * ratio)
        return r, g, b, a

class BitmapFont(Prototype):
    def __init__(self, char_width=8, char_height=12):
        self.char_width = char_width
        self.char_height = char_height
        self.color = (255, 255, 255, 255)
        self.background = (0, 0, 0, 0)
        self.outline_color = None
        self.outline_width = 0
        self.glyphs = self._create_glyphs()
    
    def clone(self):
        return deepcopy(self)
    
    def set_color(self, color):
        self.color = color
        return self
    
    def set_background(self, background):
        self.background = background
        return self
    
    def set_outline(self, outline_color, outline_width):
        self.outline_color = outline_color
        self.outline_width = outline_width
        return self
    
    def render_char(self, draw, char, x, y):
        if char not in self.glyphs:
            char = ' '
        
        glyph = self.glyphs[char]
        
        if self.outline_color and self.outline_width > 0:
            for row in range(len(glyph)):
                for col in range(len(glyph[row])):
                    if glyph[row][col]:
                        for dx in range(-self.outline_width, self.outline_width + 1):
                            for dy in range(-self.outline_width, self.outline_width + 1):
                                if dx == 0 and dy == 0:
                                    continue
                                pixel_x = x + col + dx
                                pixel_y = y + row + dy
                                if (0 <= row + dy < len(glyph) and 
                                    0 <= col + dx < len(glyph[0]) and 
                                    not glyph[row + dy][col + dx]):
                                    draw.point((pixel_x, pixel_y), fill=self.outline_color)
        
        for row in range(len(glyph)):
            for col in range(len(glyph[row])):
                pixel_x = x + col
                pixel_y = y + row
                if glyph[row][col]:
                    draw.point((pixel_x, pixel_y), fill=self.color)
                elif self.background[3] > 0:
                    draw.point((pixel_x, pixel_y), fill=self.background)
    
    def render_text(self, draw, text, x, y, spacing=1, align='left'):
        if align == 'center':
            total_width = len(text) * self.char_width + (len(text) - 1) * spacing
            x -= total_width // 2
        elif align == 'right':
            total_width = len(text) * self.char_width + (len(text) - 1) * spacing
            x -= total_width
        
        current_x = x
        for char in text:
            self.render_char(draw, char, current_x, y)
            current_x += self.char_width + spacing
    
    def get_text_width(self, text, spacing=1):
        return len(text) * self.char_width + (len(text) - 1) * spacing
    
    def _create_glyphs(self):
        glyphs = {}
        
        for i in range(10):
            glyphs[str(i)] = self._create_digit_glyph(i)
        
        glyphs[' '] = [[0]*self.char_width for _ in range(self.char_height)]
        glyphs['.'] = self._create_period_glyph()
        glyphs[','] = self._create_comma_glyph()
        glyphs['!'] = self._create_exclamation_glyph()
        glyphs['?'] = self._create_question_glyph()
        glyphs[':'] = self._create_colon_glyph()
        glyphs[';'] = self._create_semicolon_glyph()
        glyphs['-'] = self._create_hyphen_glyph()
        
        glyphs.update(self._create_basic_glyphs())

        return glyphs
    
    def _create_digit_glyph(self, digit):
        digits = {
            0: [
                [0,1,1,1,1,1,1,0],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,1,1,1],
                [1,1,0,0,1,0,1,1],
                [1,1,0,1,0,0,1,1],
                [1,1,1,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [0,1,1,1,1,1,1,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ],
            1: [
                [0,0,0,1,1,0,0,0],
                [0,0,1,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [1,1,1,1,1,1,1,1],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ],
            2: [
                [0,1,1,1,1,1,1,0],
                [1,1,0,0,0,0,1,1],
                [0,0,0,0,0,0,1,1],
                [0,0,0,0,0,1,1,0],
                [0,0,0,0,1,1,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,1,1,0,0,0,0],
                [0,1,1,0,0,0,0,0],
                [1,1,1,1,1,1,1,1],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ],
            3: [
                [0,1,1,1,1,1,1,0],
                [1,1,0,0,0,0,1,1],
                [0,0,0,0,0,0,1,1],
                [0,0,0,0,0,1,1,0],
                [0,0,1,1,1,1,0,0],
                [0,0,0,0,0,1,1,0],
                [0,0,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [0,1,1,1,1,1,1,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ],
            4: [
                [0,0,0,0,1,1,0,0],
                [0,0,0,1,1,1,0,0],
                [0,0,1,1,1,1,0,0],
                [0,1,1,0,1,1,0,0],
                [1,1,0,0,1,1,0,0],
                [1,1,1,1,1,1,1,1],
                [0,0,0,0,1,1,0,0],
                [0,0,0,0,1,1,0,0],
                [0,0,0,0,1,1,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ],
            5: [
                [1,1,1,1,1,1,1,1],
                [1,1,0,0,0,0,0,0],
                [1,1,0,0,0,0,0,0],
                [1,1,1,1,1,1,0,0],
                [0,0,0,0,0,0,1,1],
                [0,0,0,0,0,0,1,1],
                [0,0,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [0,1,1,1,1,1,1,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ],
            6: [
                [0,1,1,1,1,1,1,0],
                [1,1,0,0,0,0,0,0],
                [1,1,0,0,0,0,0,0],
                [1,1,0,0,0,0,0,0],
                [1,1,1,1,1,1,0,0],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [0,1,1,1,1,1,1,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ],
            7: [
                [1,1,1,1,1,1,1,1],
                [0,0,0,0,0,0,1,1],
                [0,0,0,0,0,1,1,0],
                [0,0,0,0,1,1,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,1,1,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ],
            8: [
                [0,1,1,1,1,1,1,0],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [0,1,1,1,1,1,1,0],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [0,1,1,1,1,1,1,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ],
            9: [
                [0,1,1,1,1,1,1,0],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [1,1,0,0,0,0,1,1],
                [0,1,1,1,1,1,1,1],
                [0,0,0,0,0,0,1,1],
                [0,0,0,0,0,0,1,1],
                [0,0,0,0,0,0,1,1],
                [0,1,1,1,1,1,1,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0],
                [0,0,0,0,0,0,0,0]
            ]
        }
        return digits[digit]
    
    def _create_period_glyph(self):
        return [
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
    
    def _create_comma_glyph(self):
        return [
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
    
    def _create_exclamation_glyph(self):
        return [
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
    
    def _create_question_glyph(self):
        return [
            [0,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [0,0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
    
    def _create_colon_glyph(self):
        return [
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
    
    def _create_semicolon_glyph(self):
        return [
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
    
    def _create_hyphen_glyph(self):
        return [
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,1,1,1,1,1,0,0],
            [0,1,1,1,1,1,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]

    
    def _create_basic_glyphs(self):
        glyphs = {}
        
        glyphs['A'] = [
            [0,0,1,1,1,1,0,0],
            [0,1,1,0,0,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,1,1,1,1,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['B'] = [
            [1,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['C'] = [
            [0,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,1,1],
            [0,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['D'] = [
            [1,1,1,1,1,1,0,0],
            [1,1,0,0,0,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,1,1,0],
            [1,1,1,1,1,1,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['E'] = [
            [1,1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,1,1,1,1,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,1,1,1,1,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['F'] = [
            [1,1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,1,1,1,1,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['G'] = [
            [0,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,1,1,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['H'] = [
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,1,1,1,1,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['I'] = [
            [1,1,1,1,1,1,1,1],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [1,1,1,1,1,1,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['J'] = [
            [1,1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0,0],
            [0,0,0,0,1,1,0,0],
            [0,0,0,0,1,1,0,0],
            [0,0,0,0,1,1,0,0],
            [0,0,0,0,1,1,0,0],
            [1,1,0,0,1,1,0,0],
            [1,1,0,0,1,1,0,0],
            [0,1,1,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['K'] = [
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,1,1,0],
            [1,1,0,0,1,1,0,0],
            [1,1,0,1,1,0,0,0],
            [1,1,1,1,0,0,0,0],
            [1,1,0,1,1,0,0,0],
            [1,1,0,0,1,1,0,0],
            [1,1,0,0,0,1,1,0],
            [1,1,0,0,0,0,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['L'] = [
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,1,1,1,1,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['M'] = [
            [1,1,0,0,0,0,1,1],
            [1,1,1,0,0,1,1,1],
            [1,1,1,1,1,1,1,1],
            [1,1,0,1,1,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['N'] = [
            [1,1,0,0,0,0,1,1],
            [1,1,1,0,0,0,1,1],
            [1,1,1,1,0,0,1,1],
            [1,1,0,1,1,0,1,1],
            [1,1,0,0,1,1,1,1],
            [1,1,0,0,0,1,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['O'] = [
            [0,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['P'] = [
            [1,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['Q'] = [
            [0,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,1,1,1,1],
            [0,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]

        glyphs['R'] = [
            [1,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,1,1,1,1,1,0],
            [1,1,0,1,1,0,0,0],
            [1,1,0,0,1,1,0,0],
            [1,1,0,0,0,1,1,0],
            [1,1,0,0,0,0,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['S'] = [
            [0,1,1,1,1,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [0,1,1,1,1,1,0,0],
            [0,0,0,0,0,0,1,1],
            [0,0,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['T'] = [
            [1,1,1,1,1,1,1,1],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['U'] = [
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,1,1,1,1,1,1,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['V'] = [
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,1,1,0,0,1,1,0],
            [0,1,1,0,0,1,1,0],
            [0,0,1,1,1,1,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['W'] = [
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [1,1,0,1,1,0,1,1],
            [1,1,1,1,1,1,1,1],
            [1,1,1,0,0,1,1,1],
            [1,1,0,0,0,0,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['X'] = [
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,1,1,0,0,1,1,0],
            [0,1,1,0,0,1,1,0],
            [0,0,1,1,1,1,0,0],
            [0,1,1,0,0,1,1,0],
            [0,1,1,0,0,1,1,0],
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['Y'] = [
            [1,1,0,0,0,0,1,1],
            [1,1,0,0,0,0,1,1],
            [0,1,1,0,0,1,1,0],
            [0,1,1,0,0,1,1,0],
            [0,0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs['Z'] = [
            [1,1,1,1,1,1,1,1],
            [0,0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0,0],
            [0,1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0,0],
            [1,1,1,1,1,1,1,1],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0]
        ]
        
        glyphs[' '] = [[0]*8 for _ in range(12)]
        
        return glyphs
        

if __name__ == "__main__":
    from PIL import Image, ImageDraw
    
    img = Image.new('RGB', (400, 100), (0, 0, 0))
    draw = ImageDraw.Draw(img)
    
    font = BitmapFont()
    font.set_color((0, 255, 0, 255))
    
    font.render_text(draw, "ABCDEFGHIJKLMNOPQRSTUVWXYZ", 5, 5)
    
    font2 = font.clone()
    font2.set_color((255, 255, 0, 255)).set_outline((255, 0, 0, 255), 1)
    font2.render_text(draw, "1234567890A!?.,;:-", 5, 50)
    
    img.save("test_output.png")
    print("Sample image saved as test_output.png")